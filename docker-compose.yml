services:
  etl:
    build: .
    container_name: etl
    volumes:
      - .:/workspace/etl
    stdin_open: true
    tty: true
    # ğŸš¨ å¢åŠ è¨˜æ†¶é«”é™åˆ¶å’Œ swap è¨­å®š
    shm_size: 6g
    mem_limit: 20g
    mem_swappiness: 60
    mem_reservation: 12g
    ulimits:
      memlock: -1
      stack: 8388608
      nofile: 65536
    # GPU æ”¯æ´
    deploy:
      resources:
        limits:
          memory: 16g
        reservations:
          memory: 8g
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
